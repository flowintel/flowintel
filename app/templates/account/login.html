<!-- 
    Author: David Cruciani
-->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Flowintel</title>
    <link rel="icon" href="{{ url_for('static',filename='image/flowintel.png') }}">
    <script src="{{ url_for('static',filename='js/vendor/popper.min.js') }}"></script>
    <script src="{{ url_for('static',filename='js/vendor/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static',filename='js/vendor/jquery.min.js') }}"></script>

    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/vendor/bootstrap.min.css') }}">

    <style>
        body {
            background-color: #f5f5f5;
        }

        .logo-container {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 10%;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        .form-signin {
            width: 100%;
            max-width: 330px;
            padding: 30px;
            top: 25%;
            left: 50%;
            transform: translateX(-50%);
            position: absolute;
            background: linear-gradient(135deg, rgb(31, 55, 99) 0%, rgb(69, 98, 151) 100%);
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .form-signin .checkbox {
            font-weight: 400;
        }

        .form-signin .form-floating:focus-within {
            z-index: 2;
        }

        .form-signin input[type="email"] {
            margin-bottom: -1px;
        }

        .form-signin input[type="password"] {
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <main>
        {% include 'macros/_flashes.html' %}

        <div class="logo-container mb-4">
            {% if config.WELCOME_LOGO %}
            <img src="{{ config.WELCOME_LOGO }}" alt="" loading="lazy" />
            {% endif %}
            <img src="{{ config.MAIN_LOGO }}" height="100" alt="{{ config.APP_NAME }} Logo" loading="lazy" />
        </div>

        <form action="" method="post" class="form-signin">
            {{ form.hidden_tag() }}

            {% if config.WELCOME_TEXT_TOP %}
            <div class="mb-3" style="text-align: center;">
                <p class="fw-bold" style="color: white;">{{ config.WELCOME_TEXT_TOP }}</p>
            </div>
            {% endif %}

            {% if config.WELCOME_TEXT_BOTTOM %}
            <div class="mb-3" style="text-align: center;">
                <p class="fw-bold" style="color: white;">{{ config.WELCOME_TEXT_BOTTOM }}</p>
            </div>
            {% endif %}

            <div class="mb-3">
                <label for="email" style="color: white;">{{form.email.label.text}}:</label>
                {{form.email(class_="form-control")}}
                {% if form.email.errors %}
                <div style="color: #ffcccc;">{{form.email.errors[0] | safe}}</div>
                {%endif%}
            </div>
            <div class="mb-3">
                <label for="password" style="color: white;">{{form.password.label.text}}:</label>
                {{form.password(class_="form-control")}}
            </div>
            <div class="checkbox mb-3">
                {{form.remember_me}}
                <label for="remember_me" style="color: white;">{{form.remember_me.label.text}}</label>
            </div>

            {{form.submit(class='btn btn-light w-100')}}

            {% if config.ENTRA_ID_ENABLED %}
            <div class="mt-3">
                <a href="{{ url_for('account.entra_login') }}" class="btn btn-outline-light w-100">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 21 21" style="margin-right:6px;vertical-align:text-bottom">
                        <rect x="1" y="1" width="9" height="9" fill="#f25022"/>
                        <rect x="11" y="1" width="9" height="9" fill="#7fba00"/>
                        <rect x="1" y="11" width="9" height="9" fill="#00a4ef"/>
                        <rect x="11" y="11" width="9" height="9" fill="#ffb900"/>
                    </svg>
                    Sign in with Microsoft
                </a>
            </div>
            {% endif %}

            {% if show_reset_link %}
            <div class="mt-3" style="text-align: center;">
                <a href="{{ url_for('account.request_password_reset') }}" style="color: #ccddff;">Request password reset from administrator</a>
            </div>
            {% endif %}
        </form>
    </main>
    <!--Main layout-->
</body>
</html>